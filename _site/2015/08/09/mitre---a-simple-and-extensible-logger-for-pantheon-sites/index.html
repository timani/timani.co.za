<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]-->
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
    Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Mitre - A simple and extensible logger for Pantheon sites</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Mobile viewport optimized: j.mp/bplateviewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->

    <link rel="shortcut icon" href="https://timani.github.io/timani.co.za/images/favicon.png">

    <!-- CSS: implied media="all" -->
    <link rel="stylesheet" href="https://timani.github.io/timani.co.za/css/style.css">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="https://timani.github.io/timani.co.za/images/android-desktop.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="images/ios-desktop.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="https://timani.github.io/timani.co.za/images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <!-- More ideas for your <head> here: h5bp.com/docs/#head-Tips -->

        <!-- Rainbox lightweight syntax highlighter CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/themes/github.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://timani.github.io/timani.co.za/css/material.min.css">

    <link rel="stylesheet" href="https://timani.github.io/timani.co.za/css/custom.css">
    <link rel="stylesheet" href="https://timani.github.io/timani.co.za/css/styles.css">


    <style>
    #view-source {
      position: fixed;
      display: block;
      right: 0;
      bottom: 0;
      margin-right: 40px;
      margin-bottom: 40px;
      z-index: 900;
    }
    </style>
    <!-- All JavaScript at the bottom, except for Modernizr and Respond.
    Modernizr enables HTML5 elements & feature detects; Respond is a polyfill for min/max-width CSS3 Media Queries
    For optimal performance, use a custom Modernizr build: www.modernizr.com/download/ -->
    <script src="https://timani.github.io/timani.co.za/js/libs/modernizr-2.0.min.js"></script>
    <script src="https://timani.github.io/timani.co.za/js/libs/respond.min.js"></script>
  </head>

<body>

    <header class="demo-header mdl-layout__header mdl-layout__header--scroll mdl-color--grey-100 mdl-color-text--grey-800">
  <div class="mdl-layout__header-row">
    <div class="mdl-layout__drawer-button"><i class="material-icons">menu</i></div>
    <div class="mdl-layout-spacer"></div>
    <nav class="android-navigation mdl-navigation">
      <a class="mdl-navigation__link mdl-typography--text-uppercase" href="https://timani.github.io/timani.co.za/about/index.html">About</a>
      <a class="mdl-navigation__link mdl-typography--text-uppercase" href="https://timani.github.io/timani.co.za/contact/index.html">Contact</a>
    </nav>
    <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
      <label class="mdl-button mdl-js-button mdl-button--icon" for="search">
        <i class="material-icons">search</i>
      </label>
      <div class="mdl-textfield__expandable-holder">
        <input class="mdl-textfield__input" type="text" id="search">
        <label class="mdl-textfield__label" for="search">Enter your query...</label>
      </div>
    </div>
  </div>
</header>
<div class="demo-ribbon"></div>

<a href="#" target="_blank" id="view-source"class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--accent mdl-color-text--accent-contrast" data-upgraded=",MaterialButton,MaterialRipple">View Source<span class="mdl-button__ripple-container">
  <span class="mdl-ripple is-animating" ></span></span></a>
      <main  class="demo-main mdl-layout__content">
        <div class="demo-container mdl-grid">
          <div class="demo-content mdl-color--white content mdl-color-text--grey-800 mdl-cell mdl-cell--8-col mdl-cell--12-col-tablet mdl-cell--12-col-phone">
              <div class="mdl-layout__header-row" id="top-nav" style="
    clear: both;
    display: block;
    text-align: center;
">

  <div style="
    overflow: hidden;
    display: block;
    clear: both;
    width: 100%;
"><img src="http://placehold.it/200x200" style="
    border-radius: 101px;
"><div class="android-navigation-container">
            <nav class="android-navigation mdl-navigation">
            <span class="mdl-layout-title">
              <a href="https://timani.github.io/timani.co.za" class="mdl-navigation__link mdl-typography--text-uppercase">Home</a>
            </span>
              <a class="mdl-navigation__link mdl-typography--text-uppercase" href="https://timani.github.io/timani.co.za/blog/index.html">Blog</a>
              <a class="mdl-navigation__link mdl-typography--text-uppercase" href="https://timani.github.io/timani.co.za/archives/index.html">Archives</a>
              <a class="mdl-navigation__link mdl-typography--text-uppercase" href="https://timani.github.io/timani.co.za/about/index.html">About</a>
              <a class="mdl-navigation__link mdl-typography--text-uppercase" href="https://timani.github.io/timani.co.za/contact/index.html">Contact</a>
            </nav>
          </div></div>

</div>

              <div class="demo-crumbs mdl-color-text--grey-500">
                <a href="https://timani.github.io/timani.co.za" class="mdl-color-text--grey-500">Home</a> &raquo;
                <a href="https://timani.github.io/timani.co.za/blog/index.html" class="mdl-color-text--grey-500">Blog</a> &raquo;
 &gt; Mitre - A simple and extensible logger for Pantheon sites
              </div>

              <article class="h-entry">
                <h3 class="entry-title">Mitre - A simple and extensible logger for Pantheon sites</h3>
                <div class="e-content">
                  <div>
                    <p class="meta-section tags">
                      Posted <a class="p-author h-card" style="border-bottom:dotted; border-color:#ccc; color:#aaa; display:none" href="#">W. Developer</a>  on
                      <time class="dt-published" datetime="2013-06-13 12:00:00"><span class="tutorial-date">Oct 14, 2013</span></time>
                       <span class="hashtag-icon"> Categories: </span>
                       <a class="" href="/community/tags/one-click-install-apps?type=tutorials">One-Click Install Apps</a>,
                       <a class="" href="/community/tags/ghost?type=tutorials">Ghost</a>,
                       <a class="" href="/community/tags/nginx?type=tutorials">Nginx</a>
                    </p>
                  </div>
                  <div class="section-spacer"></div>
                  <div>
                    <div class="icon material-icons" role="presentation" id="social-share" >share</div>
                    <div class="mdl-tooltip" for="social-share">share</div>
                  </div>
                </div>
                  <div class="entry-content" itemprop="articleBody">
		<p>We most frequently use Curl in the form of `libcurl`, a C library providing function transferring data between servers using many of the popular protocols like HTTP, FTP, SCP, and so on.  This library is the foundation things like all the <code>curl_*()</code> functions in PHP, which are useful for writing code that interacts with various web services.</p>

    <!--more-->
<p>But there is also the Curl command line program, built atop the same library. I find the program useful for debugging and testing certain aspects of web applications, so I wanted to share a list of the things I like to do with Curl, which I hope you will find useful as well.</p>
<h2>Headers</h2>
<p>To see the headers from a site:</p>
<pre lang="bash">$ curl --head <a href="http://example.com/" target="_blank">http://example.com</a></pre>
<p>We can use this to make sure any custom headers are being sent properly, and to see things like what cache information the server is sending to browsers.  It will also show information like the PHP session ID.  Or more importantly sometimes is what the command does not show, if we have an error in our code that prevents necessary headers from being sent.</p>
<h2>Cookies</h2>
<p>The command above will show cookie info, but if that’s all we’re interested in then we use this:</p>
<pre lang="bash">$ curl --cookie-jar cookies.txt <a href="http://example.com/" target="_blank">http://example.com/</a></pre>
<p>We can then inspect the cookies to see if the values are set to what we expect.  Or to try out different things we can change the values and then run:</p>
<pre lang="bash">$ curl --cookie cookies.txt <a href="http://example.com/" target="_blank">http://example.com/</a></pre>
<p>to simulate a request using our new cookie values. By using the option `–junk-session-cookies` in conjunction with the above, we can send all of our modified cookies but without any session information. This has the effect of behaving as if we had closed our browser.</p>
<h2>Forms</h2>
<p>When we want to write a script that deals with submitting a &lt;form&gt;, we can use the <code>--data</code> option to pass in values to the form fields.  For example, to test a script where users can post comments to a site:</p>
<pre lang="bash">$ curl --data username='Lobby C Jones' --data email='<a href="https://host.cybersprocket.com:2096/3rdparty/squirrelmail/src/compose.php?send_to=Lobby%40cybersprocket.com" target="_blank">Lobby@cybersprocket.com</a>' --data message='Nom nom nom' <a href="http://localhost/eric/test.php" target="_blank">http://localhost/eric/test.php</a></pre>
<p>If the message we wanted to send was really long, we could put it in a text file and then change that particular option to:</p>
<pre lang="bash">--data-urlencode <a href="https://host.cybersprocket.com:2096/3rdparty/squirrelmail/src/compose.php?send_to=message%40input.txt" target="_blank">message@input.txt</a></pre>
<p>That is, we can write:</p>
<pre lang="bash">--data-urlencode name@file</pre>
<p>to mean the same thing as:</p>
<pre lang="bash">--data name=&lt;contents of file&gt;</pre>
<p>This is *not* a file upload; it is simply a way to read contents from a file and use them as a form parameter value.  To perform an actual file upload we can use the `–form` option.  Let’s say we want to simulate uploading a CSV file to a web application:</p>
<pre lang="bash"> $ curl --form doc=@our-data.csv <a href="http://probably.dtuser.com/" target="_blank">http://probably.dtuser.com/</a></pre>
<p>This would upload <code>our-data.csv</code> as the <code>doc</code> form field.  If needed, we can specify the content type:</p>
<pre lang="bash">$ curl --form "photo=@lobby.png;type=image/png" <a href="http://lonelysingles.com/photos/shellfish/upload.php" target="_blank">http://lonelysingles.com/photos/shellfish/upload.php</a></pre>
<p>We can use <code>--get</code> to send our data in the form of <code>GET</code> instead of a <code>POST</code>, although this does not work with <code>--form</code> since it always uses the content type <code>multipart/form-data</code>.  But it will modify any <code>--data</code> that we send to be appended to the URL.</p>
<h2>Timeouts and Retries</h2>
<p>When using Curl in scripts we want to avoid situations where the whole operation might hang, either because the server hangs, or because we are using the script to download something when the network connection is very slow, or because of a solar flare.  We can use three options to avoid these problems.</p>
<ol>
<li><code>--connect-timeout &lt;N&gt;</code> will wait N seconds for the connection to succeed before bailing.  This only affects the connection.  Once we successfully initiate communication with the server, there is no time limit.  To control that we use…</li>
<li><code>--max-time &lt;N&gt;</code> which only allows N seconds for the entire operation.</li>
<li><code>--no-solar-flare</code> avoids all solar flares.</li>
</ol>
<p>If we are scripting an operation that could fail then we can tell Curl to retry a number of times by using <code>--retry &lt;N&gt;</code>.  If the request fails, Curl will wait one second and then try again.  That delay then doubles after every successive failure, maxing out at ten minutes.</p>
<h2>PUT Requests</h2>
<p>We usually don’t deal with web applications that respond to PUT requests(although I think it’s a useful practice).  In the cases where we are, we can use Curl to easily test out PUT requests by sending the contents of a file like so:</p>
<pre lang="bash">$ curl -T file.png <a href="http://example.com/put/script.php" target="_blank">http://example.com/put/script.php</a></pre>
<p>Or if we wanted to PUT multiple files at once:</p>
<pre lang="bash">$ curl -T "image[1-100].png" <a href="http://example.com/put/script.php" target="_blank">http://example.com/put/script.php</a></pre>
<p>This has the effect of PUT-ing the files <code>image1.png</code>, <code>image2.png</code>, and so on up to <code>image100.png</code>.</p>
<h2>Other Requests</h2>
<p>Besides <code>PUT</code>, there is also <code>DELETE</code>, which again is not commonly encountered. If needed, we can make such requests with Curl like so:</p>
<pre lang="bash">$ curl --request DELETE <a href="http://localhost/resource/to/delete/" target="_blank">http://localhost/resource/to/delete/</a></pre>
<p>If we are using Curl to interact with FTP then the request command can be any valid FTP command. And that’s it for my brain-dump about Curl usage.  Everything I’ve shown above can be accomplished by browsers, either out-of-the-box or via various add-ons.  But where I like to use Curl is in scripts; in contrast to browsers, Curl makes it easy to create a repeatable series of requests to send to a site, and then I can do simple tests on those results to determine whether or not something worked as expected.  If you have any questions about Curl, or anything you like to use it for that hasn’t been covered here, then please share.</p>
<div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-loaded" id="like-post-wrapper-45816809-2665-55c69dfe646d6" data-src="//widgets.wp.com/likes/#blog_id=45816809&amp;post_id=2665&amp;origin=www.storelocatorplus.com&amp;obj_id=45816809-2665-55c69dfe646d6" data-name="like-post-frame-45816809-2665-55c69dfe646d6"><h3 class="sd-title">Like this:</h3></div>		</div>

              </article>
              <div class="mdl-grid mdl-grid--no-spacing vcard mdl-shadow--2dp" id="hcard-Timani-Tunduwani">
                <div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone">
                  <div class="section__circle-container__circle"><img src="http://www.gravatar.com/avatar/bac5f46541d2e394355c0f46a03d81ff.jpg?s=200" alt="photo of " class="photo" width="85%" style="
    padding: 20px;"></div>
                </div>
                <div class="section__text mdl-cell mdl-cell--9-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone" style="
    padding: 35px;
">
                  <a class="url fn" href="https://timani.co.za">Timani Tunduwani</a>
                  <div class="adr"> <span class="country-name">United States</span></div>
                  Dolore ex deserunt aute fugiat aute nulla ea sunt aliqua nisi cupidatat eu. Duis nulla tempor do aute et eiusmod velit exercitation nostrud quis <a href="#">proident minim</a></div>
              </div>


              <div id="disqus_thread"></div>
                  <script type="text/javascript">
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'timani'  ; // required: replace example with your forum shortname
                      // var disqus_developer = 1; // Comment out when the site is live
                      var disqus_identifier = "/2015/08/09/mitre---a-simple-and-extensible-logger-for-pantheon-sites/";

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script>
                  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
            </div>
      </main>

    <footer class="demo-footer mdl-mini-footer">
  <div class="mdl-mini-footer--left-section">
    <ul class="mdl-mini-footer--link-list">
      <li><a href="#">Help</a></li>
      <li><a href="#">Privacy and Terms</a></li>
      <li><a href="#">User Agreement</a></li>
    </ul>
  </div>
</footer>



    <div id="container">  </div> <!--! end of #container -->
<!-- JavaScript at the bottom for fast page loading -->

<!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.6.2.min.js"><\/script>')</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.3.0/anchor.min.js"></script>

<!-- scripts concatenated and minified via ant build script-->
<script src="https://timani.github.io/timani.co.za/js/plugins.js"></script>
<script src="https://timani.github.io/timani.co.za/js/script.js"></script>

<!-- Material Design JS-->
<script src="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.min.js"></script>

<!-- you can create a custom build with specific languages
this should go before the closing </body> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/rainbow.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/generic.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/csharp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/java.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/php.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/ruby.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rainbow/1.2.0/js/language/shell.min.js"></script>


<!-- end scripts-->

<!-- mathiasbynens.be/notes/async-analytics-snippet Change UA-XXXXX-X to be your site's ID -->
<script>
  var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview'],['_trackPageLoadTime']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.
     chromium.org/developers/how-tos/chrome-frame-getting-started -->
<!--[if lt IE 7 ]>
  <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
  <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
<![endif]-->
</body>
</html>
